<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="oper.sys.btchJobHist">
    <!-- 배치작업 이력 조회 -->
    <select id="searchBtchJobHistList" parameterType="java.util.Map" resultType="MybatisMap">
    select TJB.JOB_ID
          ,TJB.JOB_NM
          ,TJB.JOB_HIST_NO
          ,TJB.RMRK
          ,TJH.RSLT_CNTN
          ,TJH.RSLT_CD
          ,TJH.STRT_DT
          ,TJH.END_DT
    from   TC_JOB_BASE TJB
    inner  join
    TC_JOB_HIST TJH
    on     TJB.JOB_ID = TJH.JOB_ID
    where  1=1
    <if test="entrDtFr != null and entrDtFr != null and entrDtTo !='' and entrDtTo !='' ">
    and TJH.STRT_DT between replace(#{entrDtFr},'-','') and replace(#{entrDtTo},'-','')</if>
    <if test="endDtFr  != null and endDtFr  != null and endDtTo  !='' and endDtTo !='' ">
    and TJH.END_DT  between replace(#{endDtFr},'-','')  and replace(#{endDtTo},'-','')</if>
    <if test=" jobId != null and jobId != '' ">
    and TJB.JOB_ID  = #{jobId}</if>
    <if test=" jobNm != null and jobNm != '' ">
    and TJB.JOB_NM  = #{jobNm}</if>
    <if test=' paging == "Y" '>
    LIMIT ${rowCount} OFFSET ${currentIndex}
    </if>
    </select>
</mapper>
