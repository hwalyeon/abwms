<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="oper.cmon.totMonStat">

	<!-- 종합관제현황_조회 -->
	<select id="searchTotMonStat" parameterType="java.util.Map" resultType="MybatisMap">
		SELECT		123456 	AS OPEN_CNT
				  , 97456 	AS OPER_CNT
				  , 24561 	AS NO_RSPS
		FROM		NOW()
	</select>

	<!-- 종합관제현황_위험감정_이력_조회 -->
	<select id="searchTotMonStatDgemHist" parameterType="java.util.Map" resultType="MybatisMap">
		SELECT		TO_CHAR(TO_DATE(DGEM_DT, 'YYYYMMDD'::TEXT), 'MM/DD') AS DGEM_DT,
				  	TO_CHAR(TO_TIMESTAMP(DGEM_TM, 'HH24MISS'::TEXT), 'AM HH12:MI') AS DGEM_TM,
				  	DGEM_STAT_CD,
				  	FN_GETCDNM('DGEM_STAT_CD', DGEM_STAT_CD) AS DGEM_STAT_NM
		FROM		TS_STDT_DGEM_HIST TSDH
		WHERE		1 = 1
		ORDER BY	DGEM_DT DESC, DGEM_TM DESC
		LIMIT 		11
	</select>

	<!-- 종합관제현황_메뉴_리스트_조회 -->
	<select id="searchTotMonStatMenuList" parameterType="java.util.Map" resultType="MybatisMap">
		SELECT 	A.MENU_NO,
			 	A.MENU_NM,
			 	A.MENU_URL
		FROM   	TC_MENU_BASE A
			   	INNER JOIN TC_MENU_ROLE C
				ON  C.MENU_NO = A.MENU_NO
			   	INNER JOIN TC_USER_ROLE D
			  	ON  D.ROLE_CD = C.ROLE_CD
		WHERE  	1 = 1
		AND    	A.USE_YN  = 'Y'
		AND    	D.USER_ID = #{userId}
		AND    	A.MENU_URL IS NOT NULL
		ORDER BY A.MENU_NO
	</select>

</mapper>