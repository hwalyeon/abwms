<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="svcStnd.fat.ddPalMng">

       <select id="searchDdPalList" parameterType="java.util.Map" resultType="MybatisMap">
        SELECT  curr_fat_judg_cd /* curr_fat_judg_cd 현재_비만_판정_코드 character varying(20) */
               ,prdt_fat_judg_cd /* prdt_fat_judg_cd 예측_비만_판정_코드 character varying(20) */
               ,sex_cd /* sex_cd 성별_코드 character varying(20) */
               ,age_ycnt /* age_ycnt 나이_년수_FROM numeric */
               ,pal_val_fr /* pal_val_fr 신체활동수준_값_FROM numeric */
               ,pal_val_to /* pal_val_to 신체활동수준_값_TO numeric */
               ,cal_qty_fr /* cal_qty_fr 칼로리량_FORM numeric */
               ,cal_qty_to /* cal_qty_to 칼로리량_TO numeric */
               ,dd_cal_qty /* dd_cal_qty 일일_칼로리_량 numeric */
               ,pal_cd /* pal_cd 신체활동수준_코드 character(18) */
               ,nutr_cd /* nutr_cd 영양소_코드 character(18) */
               ,nutr_stat_cd /* nutr_stat_cd 영양섭취_상태_코드 character(18) */
               ,reg_dt /* reg_dt 등록_일자 character(8) */
               ,reg_tm /* reg_tm 등록_시각 character(6) */
               ,reg_user_id /* reg_user_id 등록_사용자_ID character varying(20) */
               ,upt_dt /* upt_dt 수정_일자 character(8) */
               ,upt_tm /* upt_tm 수정_시각 character(6) */
               ,upt_user_id /* upt_user_id 수정_사용자_ID character varying(20) */
        FROM   ti_dd_pal_blck
		WHERE  1 = 1
		AND    curr_fat_judg_cd like concat('%',#{currFatJudgCd},'%')
		AND    prdt_fat_judg_cd like concat('%',#{prdtFatJudgCd},'%')
        <if test=' paging == "Y" '>
        LIMIT ${rowCount} OFFSET ${currentIndex} </if>
        </select>
       <!--행추가_행삭제 인서트-->
       <insert id="insertTiDdPalList" parameterType="java.util.Map">
           /* Generated SQL SQL ID : ti_dd_pal_blck.insert */
           INSERT INTO ti_dd_pal_blck
           (
           curr_fat_judg_cd
           ,prdt_fat_judg_cd
           ,sex_cd
           ,age_ycnt
           ,pal_val_fr
           ,pal_val_to
           ,cal_qty_fr
           ,cal_qty_to
           ,dd_cal_qty
           ,pal_cd
           ,nutr_cd
           ,nutr_stat_cd
           ,reg_dt
           ,reg_tm
           ,reg_user_id
           ,upt_dt
           ,upt_tm
           ,upt_user_id
           )
           VALUES
           (
            #{currFatJudgCd}
            ,#{prdtFatJudgCd}
            ,#{sexCd}
            ,#{ageYcnt}::NUMERIC
            ,#{palValFr}::NUMERIC
            ,#{palValTo}::NUMERIC
            ,#{calQtyFr}::NUMERIC
            ,#{calQtyTo}::NUMERIC
            ,#{ddCalQty}::NUMERIC
            ,#{palCd}
            ,#{nutrCd}
            ,#{nutrStatCd}
            ,TO_CHAR(NOW(), 'YYYYMMDD')
	        ,TO_CHAR(NOW(), 'HH24MISS')
	        ,#{regUserId}
	        ,TO_CHAR(NOW(), 'YYYYMMDD')
	        ,TO_CHAR(NOW(), 'HH24MISS')
	        ,#{uptUserId}
           )
        </insert>
       <!--행추가_행삭제 업데이트-->
       <update id="updateTiDdPalList" parameterType="java.util.Map">
           /* Generated SQL SQL ID : ti_dd_pal_blck.update */
           UPDATE ti_dd_pal_blck
           <trim prefix="SET" prefixOverrides=",">
               <if test="palValTo != null">
                   ,pal_val_to = #{palValTo} /* pal_val_to 신체활동수준_값_TO numeric */
               </if>
               <if test="ddCalQty != null">
                   ,dd_cal_qty = #{ddCalQty} /* dd_cal_qty 일일_칼로리_량 numeric */
               </if>
               <if test="palCd != null">
                   ,pal_cd = #{palCd} /* pal_cd 신체활동수준_코드 character(18) */
               </if>
               <if test="regDt != null">
                   ,reg_dt = #{regDt} /* reg_dt 등록_일자 character(8) */
               </if>
               <if test="regTm != null">
                   ,reg_tm = #{regTm} /* reg_tm 등록_시각 character(6) */
               </if>
               <if test="regUserId != null">
                   ,reg_user_id = #{regUserId} /* reg_user_id 등록_사용자_ID character varying(20) */
               </if>
               <if test="uptDt != null">
                   ,upt_dt = #{uptDt} /* upt_dt 수정_일자 character(8) */
               </if>
               <if test="uptTm != null">
                   ,upt_tm = #{uptTm} /* upt_tm 수정_시각 character(6) */
               </if>
               <if test="uptUserId != null">
                   ,upt_user_id = #{uptUserId} /* upt_user_id 수정_사용자_ID character varying(20) */
               </if>
           </trim>
           WHERE  1 = 1
           AND    curr_fat_judg_cd = #{currFatJudgCd} /* curr_fat_judg_cd 현재_비만_판정_코드 character varying(20) */
           AND    prdt_fat_judg_cd = #{prdtFatJudgCd} /* prdt_fat_judg_cd 예측_비만_판정_코드 character varying(20) */
           AND    sex_cd = #{sexCd} /* sex_cd 성별_코드 character varying(20) */
           AND    age_ycnt_fr = #{ageYcntFr} /* age_ycnt_fr 나이_년수_FROM numeric */
           AND    age_ycnt_to = #{ageYcntTo} /* age_ycnt_to 나이_년수_TO numeric */
           AND    pal_val_fr = #{palValFr} /* pal_val_fr 신체활동수준_값_FROM numeric */
       </update>
       <!--행추가_행삭제 삭제-->
       <delete id ="deleteTiDdPalList" parameterType="java.util.Map">
        /* Generated SQL SQL ID : ti_dd_pal_blck.delete */
		DELETE FROM ti_dd_pal_blck
		WHERE  1 = 1
		AND    curr_fat_judg_cd = #{currFatJudgCd} /* curr_fat_judg_cd 현재_비만_판정_코드 character varying(20) */
		AND    prdt_fat_judg_cd = #{prdtFatJudgCd} /* prdt_fat_judg_cd 예측_비만_판정_코드 character varying(20) */
		AND    sex_cd = #{sexCd} /* sex_cd 성별_코드 character varying(20) */
		AND    age_ycnt_fr = #{ageYcntFr} /* age_ycnt_fr 나이_년수_FROM numeric */
		AND    age_ycnt_to = #{ageYcntTo} /* age_ycnt_to 나이_년수_TO numeric */
		AND    pal_val_fr = #{palValFr} /* pal_val_fr 신체활동수준_값_FROM numeric */
	   </delete>
</mapper>